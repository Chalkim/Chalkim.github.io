---
title: 数据库基础-范式
date: 2021-02-02 17:20:08
categories:
- 数据库基础
tags:
- 范式
---

&emsp;&emsp;为了设计出一个好的关系型数据库模式，需要按照规范化（Normalization）方法对关系模式进行优化。满足不同程度要求的规范化被称作范式，具体而言有1NF、2NF、3NF、BCNF、4NF和5NF。

<!-- more -->

### 1NF

&emsp;&emsp;每一个分量必须是不可分的数据项。简而言之就是不能表中有表：

```
| id  | name | gender |
|-----|------|--------|
| 001 | Jack | male   |     -- OK

| id  | info          |
|     | name | gender |
|-----|------|--------|
| 001 | Jack | male   |     -- BAD
```

&emsp;&emsp;这是最基本的规范化，满足1NF的数据库模式依然可能存在插入异常、删除异常、冗余过大的问题。

### 2NF

&emsp;&emsp;在满足1NF的基础上，每一个非主属性（Non-prime attribute）**完全函数依赖**于码（Key），则满足2NF。

#### 函数依赖

##### 完全函数依赖

&emsp;&emsp;对于函数依赖X->Y，有任意X的真子集X'，满足Y不函数依赖于X'，则X->Y称为完全函数依赖。

##### 部分函数依赖

&emsp;&emsp;不是完全函数依赖的就是部分函数依赖。

&emsp;&emsp;简单说就是有X->Z, Y->Z都是完全函数依赖, 那么(X, Y)->Z就是完全函数依赖。而若Z不函数依赖于Z，那么(X, Y)->Z则是部分函数依赖。实际按照集合的方法解释会有更复杂的情况，但我们经常看到的都是这样简单组合的情况。

&emsp;&emsp;对于不满足2NF的关系模式，解决问题的方法是用投影将原关系模式为两个关系模式。


> &emsp;&emsp;学生-住址-选课关系(学号，院系，住址，课程号，成绩)
>
> &emsp;&emsp;在这个关系中（学号，课程号）是码。学号唯一确定院系与住址，院系唯一确定住址，学号与课程号唯一确定成绩。在这个关系中存在非主属性部分函数依赖于码，如住址部分依赖于（学号，课程号）。
>
> &emsp;&emsp;分解为两个关系
>
> &emsp;&emsp;学生-课程关系（学号，课程号，成绩）
>
> &emsp;&emsp;学生-住址关系（学号，院系，住址）
>
> &emsp;&emsp;这样每一个关系内都不存在部分函数依赖于码的情况了。
>

### 3NF

&emsp;&emsp;消除非主属性对码的传递函数依赖。即每一个非主属性既不部分依赖于码也不传递依赖于码。

&emsp;&emsp;X->Y, Y->Z, 但X不函数依赖于Y，则Z传递依赖于X。存在这样关系的关系模式则不符合3NF。

&emsp;&emsp;解决的方法是将关系模式分解。

### BCNF

&emsp;&emsp;所有非主属性对每一个码都是完全函数依赖。

&emsp;&emsp;所有主属性对每一个不包含它的码也是完全函数依赖。

&emsp;&emsp;没有任何属性完全函数依赖于非码的任何一组属性。


